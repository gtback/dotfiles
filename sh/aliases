#!/bin/bash

### Date aliases
alias today="date +%F"
alias now="date +%FT%T"

## "Improved" standard utils

# https://the.exa.website/
alias ls='exa'
alias l='exa -lFhg -m --time-style=long-iso'
alias ll='exa -l'
# https://github.com/sharkdp/bat
alias cat=bat
# https://github.com/muesli/duf
alias df=duf
# https://github.com/bootandy/dust
alias du=dust

alias version="echo -n \"VirtualBox \" && VBoxManage --version && vagrant --version && git --version && tmux -V &&  vim --version | head -1"

alias vagrant-ids="grep '.*' ~/code/**/.vagrant/machines/*/virtualbox/index_uuid"
alias lspath='f(){echo ${PATH} | tr ":" "\n"};f'
alias proxies="env | grep -i proxy"

alias git=hub
alias ip="http https://httpbin.org/ip | jq -r '.origin'"
alias td=todoist
alias tg=toggl
alias tm="tmuxinator start"
alias xo="xargs open"

# List top level npm packages (global and local)
#   (https://gist.github.com/yyx990803/6045243)
alias nlg="npm list -g --depth=0 2>/dev/null"
alias nl="npm list --depth=0 2>/dev/null"

alias utc.offset="date +%z"
alias utc.now="date -u +'%Y-%m-%dT%H:%M:%SZ'"

zreload() {
    CONFIG_FILE=$ZDOTDIR/.zshrc
    # shellcheck source=../zsh/.zshrc
    source "$CONFIG_FILE"
    echo "Reloaded ZSH config from $CONFIG_FILE"
}
alias zr=zreload

function gi() {
    for var in "$@"; do
        curl -sLw "\\n" "https://www.gitignore.io/api/$var" \
            | grep -v "toptal" | sed '/./,/^$/!d' \
            | sed '$d'
    done
}

function docker-rm-images() {
    docker image ls | grep "$1" | awk '{print $1 ":" $2}' | xargs -n 1 docker image rm
}

function start() {
    op.signin
    eval "$(load-gh-token.sh)"
    ssh-add
}

function stop() {
    op signout
    unset GITHUB_TOKEN
    ssh-add -D
}
